<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Portal de Alumnos - Supabase + Bootstrap</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

  <style>
    html {
      scroll-behavior: smooth;
    }

    body {
      background-color: #f8f9fa;
    }

    /* ðŸŽ¬ VIDEO PRESENTACIÃ“N */
    header {
      position: relative;
      width: 100%;
      height: 80vh;
      overflow: hidden;
    }

    header video {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: 1;
    }

    header::after {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.4);
      z-index: 2;
    }

    header .content {
      position: relative;
      z-index: 3;
      color: white;
      text-align: center;
      top: 50%;
      transform: translateY(-50%);
    }

    #alumnos-list li {
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      padding: 10px 15px;
      margin-bottom: 10px;
      list-style: none;
    }
  </style>
</head>
<body>

  <!-- ======================= -->
  <!-- ðŸš€ NAVBAR -->
  <!-- ======================= -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
    <div class="container">
      <a class="navbar-brand" href="#inicio"><i class="bi bi-laptop"></i> Portal de Alumnos</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div id="navbarNav" class="collapse navbar-collapse">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link" href="#inicio">Inicio</a></li>
          <li class="nav-item"><a class="nav-link" href="#formulario">Agregar</a></li>
          <li class="nav-item"><a class="nav-link" href="#alumnos">Alumnos</a></li>
          <li class="nav-item"><a class="nav-link" href="#contacto">Contacto</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- ======================= -->
  <!-- ðŸŽ¬ VIDEO PRESENTACIÃ“N -->
  <!-- ======================= -->
  <header id="inicio">
    <video autoplay muted loop playsinline poster="https://cdn.pixabay.com/photo/2015/05/31/10/55/student-791049_1280.jpg">
      <source src="https://cdn.pixabay.com/vimeo/436969719/ai-41000.mp4?width=1280&hash=4a0f6cf1f09b4b451cc587c3453d03d6b5896f3e" type="video/mp4">
      Tu navegador no soporta videos HTML5.
    </video>
    <div class="content container">
      <h1 class="display-4 fw-bold">Bienvenido al Portal Educativo</h1>
      <p class="lead">GestiÃ³n moderna de alumnos conectada con Supabase</p>
      <a href="#formulario" class="btn btn-primary btn-lg mt-3">
        <i class="bi bi-person-plus-fill"></i> Agregar Alumno
      </a>
    </div>
  </header>

  <!-- ======================= -->
  <!-- ðŸ§  PRESENTACIÃ“N -->
  <!-- ======================= -->
  <section class="container my-5 text-center">
    <h2>GestiÃ³n en la Nube</h2>
    <p class="lead">
      Este portal permite visualizar, agregar y administrar alumnos utilizando <strong>Supabase</strong> como base de datos.
      Es una herramienta moderna, ideal para proyectos educativos y demostraciones prÃ¡cticas.
    </p>
  </section>

  <!-- ======================= -->
  <!-- ðŸ§¾ FORMULARIO -->
  <!-- ======================= -->
  <section id="formulario" class="bg-light py-5">
    <div class="container">
      <h2 class="text-center mb-4"><i class="bi bi-person-plus-fill"></i> Agregar Alumno</h2>

      <div class="alert d-none" id="mensaje"></div>

      <form id="alumno-form" class="row g-3">
        <div class="col-md-6">
          <label for="nombre" class="form-label">Nombre</label>
          <input type="text" class="form-control" id="nombre" required>
        </div>
        <div class="col-md-6">
          <label for="apellido" class="form-label">Apellido</label>
          <input type="text" class="form-control" id="apellido" required>
        </div>
        <div class="col-md-4">
          <label for="edad" class="form-label">Edad</label>
          <input type="number" class="form-control" id="edad" min="0">
        </div>
        <div class="col-md-4">
          <label for="activo" class="form-label">Activo</label>
          <select id="activo" class="form-select">
            <option value="true">SÃ­</option>
            <option value="false">No</option>
          </select>
        </div>
        <div class="col-md-4 d-flex align-items-end">
          <button type="submit" class="btn btn-success w-100">
            <i class="bi bi-save"></i> Guardar
          </button>
        </div>
      </form>
    </div>
  </section>

  <!-- ======================= -->
  <!-- ðŸ“‹ LISTADO -->
  <!-- ======================= -->
  <section id="alumnos" class="py-5">
    <div class="container">
      <h2 class="text-center mb-4"><i class="bi bi-people-fill"></i> Lista de Alumnos</h2>
      <p id="status" class="text-center text-secondary mb-3">Cargando datos...</p>
      <ul id="alumnos-list" class="p-0"></ul>
    </div>
  </section>

  <!-- ======================= -->
  <!-- ðŸ“ž CONTACTO -->
  <!-- ======================= -->
  <section id="contacto" class="bg-light py-5">
    <div class="container text-center">
      <h2 class="mb-3"><i class="bi bi-envelope-fill"></i> Contacto</h2>
      <p class="lead mb-4">Â¿TenÃ©s dudas o sugerencias? Escribinos a:</p>
      <a href="mailto:info@portalalumnos.com" class="btn btn-outline-primary btn-lg">
        <i class="bi bi-send-fill"></i> info@portalalumnos.com
      </a>
    </div>
  </section>

  <!-- ======================= -->
  <!-- ðŸ¦¶ FOOTER -->
  <!-- ======================= -->
  <footer class="bg-dark text-white text-center py-4 mt-5">
    <div class="container">
      <p class="mb-1">Â© 2025 Portal de Alumnos</p>
      <p class="small">Hecho con <i class="bi bi-heart-fill text-danger"></i> y <strong>Supabase</strong></p>
    </div>
  </footer>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- ======================= -->
  <!-- ðŸ’» SCRIPT SUPABASE -->
  <!-- ======================= -->
  <script type="module">
    import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/supabase.min.js';

    const SUPABASE_URL = 'https://wmxnqxrjzbvkxctvhise.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndteG5xeHJqemJ2a3hjdHZoaXNlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA5ODY1NDEsImV4cCI6MjA3NjU2MjU0MX0.GAulWlNfBFQsVo04_PIYgiHZQYsMc6t8ybLQ5z02z68';
    const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

    const form = document.getElementById('alumno-form');
    const mensaje = document.getElementById('mensaje');
    const listEl = document.getElementById('alumnos-list');
    const statusEl = document.getElementById('status');

    function mostrarMensaje(texto, tipo = 'success') {
      mensaje.className = `alert alert-${tipo}`;
      mensaje.textContent = texto;
      mensaje.classList.remove('d-none');
      setTimeout(() => mensaje.classList.add('d-none'), 4000);
    }

    function setStatus(msg) {
      statusEl.textContent = msg;
    }

    async function cargarAlumnos() {
      setStatus('Consultando base de datos...');
      const { data, error } = await supabase.from('alumnos').select('*');

      if (error) {
        setStatus('âŒ Error: ' + error.message);
        return;
      }

      if (!data || data.length === 0) {
        setStatus('No hay alumnos registrados.');
        listEl.innerHTML = '';
        return;
      }

      listEl.innerHTML = '';
      setStatus(`âœ… Se encontraron ${data.length} alumnos.`);

      data.forEach(alumno => {
        const li = document.createElement('li');
        li.innerHTML = `
          <div class="d-flex flex-column flex-md-row justify-content-between align-items-md-center">
            <div>
              <strong>${alumno.nombre} ${alumno.apellido}</strong><br>
              <small>DNI: ${alumno.dni}</small>
            </div>
            <div class="text-muted mt-2 mt-md-0">
              Edad: ${alumno.edad ?? 'â€”'} | Activo: ${alumno.activo ? 'SÃ­' : 'No'}
            </div>
          </div>
        `;
        listEl.appendChild(li);
      });
    }

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const nuevo = {
        nombre: document.getElementById('nombre').value,
        apellido: document.getElementById('apellido').value,
        edad: parseInt(document.getElementById('edad').value) || null,
        activo: document.getElementById('activo').value === 'true'
      };

      const { error } = await supabase.from('alumnos').insert([nuevo]);
      if (error) {
        mostrarMensaje('Error al guardar: ' + error.message, 'danger');
        return;
      }

      mostrarMensaje('âœ… Alumno agregado correctamente.');
      form.reset();
      cargarAlumnos();
    });

    cargarAlumnos();
  </script>

</body>
</html>




